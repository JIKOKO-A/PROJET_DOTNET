<UserControl x:Class="HRManagementApp.Views.DepartmentView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:vm="clr-namespace:HRManagementApp.ViewModels"
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="1000">
    <UserControl.DataContext>
        <vm:DepartmentViewModel />
    </UserControl.DataContext>
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <Button Grid.Row="0" 
               Content="Add Department" 
               Command="{Binding AddDepartmentCommand}" 
               HorizontalAlignment="Left"
               Padding="15,8"
               Background="#27AE60"
               Foreground="White"
               BorderThickness="0"
               Cursor="Hand"
               Margin="0,0,0,10"/>
        
        <DataGrid Grid.Row="1" 
                 ItemsSource="{Binding Departments}" 
                 SelectedItem="{Binding SelectedDepartment}"
                 AutoGenerateColumns="False"
                 IsReadOnly="True"
                 GridLinesVisibility="All"
                 HeadersVisibility="Column">
            <DataGrid.Columns>
                <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="50"/>
                <DataGridTextColumn Header="Name" Binding="{Binding Name}" Width="200"/>
                <DataGridTextColumn Header="Description" Binding="{Binding Description}" Width="300"/>
                <DataGridTextColumn Header="Manager" Binding="{Binding Manager.FullName}" Width="200"/>
                <DataGridTextColumn Header="Employees Count" Binding="{Binding Employees.Count}" Width="120"/>
            </DataGrid.Columns>
        </DataGrid>
        
        <Border Grid.Row="2" 
               BorderBrush="#BDC3C7" 
               BorderThickness="1" 
               Padding="15"
               Margin="0,10,0,0"
               Visibility="{Binding IsEditMode, Converter={StaticResource BoolToVisibilityConverter}}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <TextBlock Grid.Row="0" Text="Department Details" FontSize="18" FontWeight="Bold" Margin="0,0,0,15"/>
                
                <TextBlock Grid.Row="1" Text="Name:" Margin="0,5"/>
                <TextBox Grid.Row="2" Text="{Binding SelectedDepartment.Name}" Margin="0,5"/>
                
                <TextBlock Grid.Row="3" Text="Description:" Margin="0,5"/>
                <TextBox Grid.Row="4" Text="{Binding SelectedDepartment.Description}" Margin="0,5" TextWrapping="Wrap" AcceptsReturn="True" MinHeight="60"/>
                
                <TextBlock Grid.Row="5" Text="Manager:" Margin="0,5"/>
                <ComboBox Grid.Row="6" 
                         ItemsSource="{Binding Employees}" 
                         SelectedValue="{Binding SelectedDepartment.ManagerId}"
                         SelectedValuePath="Id"
                         DisplayMemberPath="FullName"
                         Margin="0,5"/>
                
                <StackPanel Grid.Row="7" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,15,0,0">
                    <Button Content="Save" 
                           Command="{Binding SaveDepartmentCommand}" 
                           Margin="5" 
                           Padding="20,8"
                           Background="#27AE60"
                           Foreground="White"
                           BorderThickness="0"
                           Cursor="Hand"/>
                    <Button Content="Delete" 
                           Command="{Binding DeleteDepartmentCommand}" 
                           Margin="5" 
                           Padding="20,8"
                           Background="#E74C3C"
                           Foreground="White"
                           BorderThickness="0"
                           Cursor="Hand"/>
                    <Button Content="Cancel" 
                           Command="{Binding CancelEditCommand}" 
                           Margin="5" 
                           Padding="20,8"
                           Background="#95A5A6"
                           Foreground="White"
                           BorderThickness="0"
                           Cursor="Hand"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</UserControl>

